version: '3.4'

services:

  conductorsharp.noapi:
    depends_on: 
      - conductorsharp.proxy
    healthcheck:
      test: bash -c "[ -f /app/CONDUCTORSHARP_HEALTH.json ]"
      interval: 60s
      retries: 5
      start_period: 20s
      timeout: 10s

  conductorsharp.definitions:
    depends_on: 
      - conductorsharp.proxy
    healthcheck:
      test: bash -c "[ -f /app/CONDUCTORSHARP_HEALTH.json ]"
      interval: 60s
      retries: 5
      start_period: 20s
      timeout: 10s

  conductorsharp.apienabled:
    depends_on: 
      - conductorsharp.proxy
    healthcheck:
      test: bash -c "[ -f /app/CONDUCTORSHARP_HEALTH.json ]"
      interval: 60s
      retries: 5
      start_period: 20s
      timeout: 10s
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
    ports:
      - "80"

  conductorsharp.proxy:
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
    ports:
      - "5029:80"

